
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Syntax Definition &#8212; stenotype 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/flask.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="stenotype package" href="../autodoc/stenotype/" />
    <link rel="prev" title="stenotype documentation" href="../" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = '../';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../autodoc/stenotype/" title="stenotype package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="stenotype documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../">stenotype 0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="syntax-definition">
<h1>Syntax Definition<a class="headerlink" href="#syntax-definition" title="Permalink to this headline">¶</a></h1>
<p>Valid <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> annotations will always cleanly map to regular type
annotations. The conversion rules are collected in this document.</p>
<div class="section" id="how-to-annotate-functions-and-variables">
<h2>How to Annotate Functions and Variables<a class="headerlink" href="#how-to-annotate-functions-and-variables" title="Permalink to this headline">¶</a></h2>
<p>Function signature annotation was added with <a class="reference external" href="https://www.python.org/dev/peps/pep-3107/">PEP 3017</a> and properly defined
in <a class="reference external" href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>. This annotation is made up of two parts: The argument annotation
and the return value annotation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">B</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">R</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Variable annotation was added a little later with <a class="reference external" href="https://www.python.org/dev/peps/pep-0526/">PEP 526</a>, and written as
follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="p">:</span> <span class="n">Var_Type</span>
</pre></div>
</div>
<p>Since a function is just another object, it can also be annotation in this way.
For example, the function from above could also have been annotated as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">],</span> <span class="n">R</span><span class="p">]</span>
</pre></div>
</div>
<hr class="docutils" />
<p>This structure will remain as is. <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> only influences the way types
are expressed, not where they can be meaningfully used.</p>
<p>All but the variable notation of function types will also stay structurally
similar. Given the examples, they would change in the following ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># function signature notation</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;R&quot;</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c1"># variable notation of plain variables</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;Var_Type&quot;</span>

<span class="c1"># variable notation of functions</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;(A, B) -&gt; R&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="typing-types-equivalent-mappings">
<h2><code class="docutils literal notranslate"><span class="pre">typing</span></code>-Types Equivalent Mappings<a class="headerlink" href="#typing-types-equivalent-mappings" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#the-any-type">Any</a>:
Is used in cases where you have to specify a type but do not want to place
restrictions on it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;_&quot;</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>:
If a number of types are admissible for a single variable, just list them all
with an <code class="docutils literal notranslate"><span class="pre">or</span></code> between them.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;int or float&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>:
A special case of <code class="docutils literal notranslate"><span class="pre">Union</span></code>, where the only other option besides the specified
type for a variable is <code class="docutils literal notranslate"><span class="pre">None</span></code>. <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> prepends a question mark, which
is what a few other languages allow as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;?int&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>:
Fixed size container where for every element present in it the correct type
should be supplied. Tuples may also be defined with flexible length, which is
useful for variadic functions. All containers should be specified by using
their literal python notation equivalent.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
<span class="n">bar</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;(int, str, float)&quot;</span>
<span class="n">bar</span><span class="p">:</span> <span class="s2">&quot;(int, ...)&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>:
A typed list should only contain a single type. Use literal notation in
<code class="docutils literal notranslate"><span class="pre">stenotype</span></code> mode.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;[int]&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>:
A dictionary contains two arguments, one for the key types and one for the
value types. Use literal notation in <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> mode.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;{str: int}&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set">Set</a>:
Set notation is identical to list notation, the difference between them is not
relevant for annotation. Use literal notation in <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> mode.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;{int}&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>:
In situations where it’s not possible to annotate a function in its signature,
its name can be accessed at a later point in time to add type info.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">int</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;(str) -&gt; int&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>:
The Iterable interface is primarily used for containers that you only plan to
use in loops and for return types of generators. Use the <cite>*</cite> in either context
when using <code class="docutils literal notranslate"><span class="pre">stenoype</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="n">bar</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">bool</span><span class="p">]]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;*int&quot;</span>
<span class="n">bar</span><span class="p">:</span> <span class="s2">&quot;() -&gt; *bool&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0586/#id17">Literal</a>:
Literal values are not really types, but they still can be meaningfully used
in annotations. Most often, they will be part of a union, since they’d
otherwise just be constants.</p>
<p>Types can’t be expressed as literals in <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> mode, since they’d be
interpreted as instances of that type, and not the actual type object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">foo</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="n">foo</span><span class="p">:</span> <span class="s2">&quot;&#39;foo&#39; or &#39;bar&#39; or &#39;baz&#39; or 1&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar">TypeVar</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>

<span class="c1"># stenotype</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>

<span class="c1"># stenotype</span>
</pre></div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ForwardRef">ForwardRef</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>

<span class="c1"># stenotype</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="special-function-qualifiers">
<h2>Special Function Qualifiers<a class="headerlink" href="#special-function-qualifiers" title="Permalink to this headline">¶</a></h2>
<p>You can use a limited set of keywords to describe a number of special functions
in <code class="docutils literal notranslate"><span class="pre">stenotype</span></code> when annotating a function object as a variable.</p>
<p><strong>Asynchronous function</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Awaitable</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="s2">&quot;(A, B) -&gt; await R&quot;</span>
</pre></div>
</div>
<p><strong>Asynchronous generator</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">AsyncIterable</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="s2">&quot;(A, B) -&gt; await *R&quot;</span>
</pre></div>
</div>
<p><strong>Context managing functions</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regular</span>
<span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">ContextManager</span><span class="p">[</span><span class="n">R</span><span class="p">]</span>

<span class="c1"># stenotype</span>
<span class="s2">&quot;(A, B) -&gt; with R&quot;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="../">
              <img class="logo" src="../_static/typewriter-48.png" alt="Logo"/>
            </a></p>
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Syntax Definition</a><ul>
<li><a class="reference internal" href="#how-to-annotate-functions-and-variables">How to Annotate Functions and Variables</a></li>
<li><a class="reference internal" href="#typing-types-equivalent-mappings"><code class="docutils literal notranslate"><span class="pre">typing</span></code>-Types Equivalent Mappings</a></li>
<li><a class="reference internal" href="#special-function-qualifiers">Special Function Qualifiers</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="../">Overview</a>
    <ul>
          <li>Previous: <a href="../" title="previous chapter">stenotype documentation</a>
          <li>Next: <a href="../autodoc/stenotype/" title="next chapter">stenotype package</a>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Arne.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  <script type="text/javascript" src="../_static/version_warning_offset.js"></script>

  </body>
</html>